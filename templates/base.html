{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Seu Novo Imóvel{% endblock %}</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    {% block extra_head %}{% endblock %}
</head>
<body>

    <header class="main-header">
        <div class="container header-content">
            
            <a href="{% url 'home' %}" class="brand-logo">
                <div class="logo-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="logo-text">
                    <span class="site-name">Seu Novo Imóvel</span>
                    <span class="product-by">by Evotiva</span>
                </div>
            </a>

            <nav class="nav-links">
                <a href="{% url 'home' %}" class="nav-link">Início</a>
                <a href="{% url 'catalogo' %}" class="nav-link">Catálogo</a>
                <a href="{% url 'favoritos' %}" class="nav-link">Favoritos</a>
            </nav>

            <div class="user-actions">
                {% if user.is_authenticated %}
                    
                    <div class="user-dropdown">
                        <button class="user-btn">
                            <span class="user-name">Olá, {{ user.first_name }}</span>
                            <div class="avatar-circle">
                                {{ user.first_name|first }}{{ user.last_name|first }}
                            </div>
                            <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: 5px;"></i>
                        </button>
                        
                        <div class="dropdown-menu">
                            <a href="{% url 'dashboard' %}"><i class="fas fa-columns"></i> Meu Painel</a>
                            <a href="{% url 'favoritos' %}"><i class="fas fa-heart"></i> Favoritos</a>
                            <a href="{% url 'editar_perfil' %}"><i class="fas fa-cog"></i> Configurações</a>
                            <div class="dropdown-divider"></div>
                            <form action="{% url 'logout' %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="dropdown-item logout-btn">
                                    <i class="fas fa-sign-out-alt"></i> Sair
                                </button>
                            </form>
                        </div>
                    </div>

                {% else %}
                    <div class="guest-actions">
                        <a href="{% url 'login' %}" class="nav-link">Entrar</a>
                        <a href="{% url 'cadastro' %}" class="btn-glow">Criar Conta</a>
                    </div>
                {% endif %}
            </div>

            <button class="mobile-toggle" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="mobile-menu" id="mobileMenu">
            <a href="{% url 'home' %}">Início</a>
            <a href="{% url 'catalogo' %}">Catálogo</a>
            <a href="{% url 'favoritos' %}">Favoritos</a>
            {% if user.is_authenticated %}
                <a href="{% url 'dashboard' %}">Meu Painel</a>
                <a href="{% url 'editar_perfil' %}">Configurações</a>
                <form action="{% url 'logout' %}" method="post" style="padding: 15px;">
                    {% csrf_token %}
                    <button type="submit" style="background: none; border: none; color: #ff6b6b; font-size: 1rem;">Sair</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}">Entrar</a>
                <a href="{% url 'cadastro' %}">Criar Conta</a>
            {% endif %}
        </div>
    </header>

    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('active');
        }
    </script>

    <main>
        {% block content %}{% endblock %}
    </main>

   <footer class="main-footer">
    <div class="container">
        <div class="footer-grid">
            
            <div class="footer-col">
                <h3 class="footer-logo"><i class="fas fa-home"></i> Seu Novo Imóvel</h3>
                <p>Conectando pessoas aos seus sonhos de moradia de forma simples, direta e sem burocracia.</p>
                
                <div class="evotiva-badge">
                    <span style="font-size: 0.85rem; opacity: 0.7;">Desenvolvido por:</span>
                    <strong style="font-size: 1.1rem; display: block; letter-spacing: 1px;">EVOTIVA</strong>
                </div>
            </div>

            <div class="footer-col">
                <h4>Navegação</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'home' %}">Início</a></li>
                    <li><a href="{% url 'catalogo' %}">Catálogo de Imóveis</a></li>
                    <li><a href="{% url 'home' %}#comprar">Comprar</a></li>
                    <li><a href="{% url 'home' %}#alugar">Alugar</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h4>Área do Cliente</h4>
                <ul class="footer-links">
                    {% if user.is_authenticated %}
                        <li><a href="{% url 'dashboard' %}">Meu Painel</a></li>
                        <li><a href="{% url 'favoritos' %}">Meus Favoritos</a></li>
                        <li><a href="{% url 'editar_perfil' %}">Configurações</a></li>
                    {% else %}
                        <li><a href="{% url 'login' %}">Entrar</a></li>
                        <li><a href="{% url 'cadastro' %}">Criar Conta</a></li>
                        <li><a href="{% url 'password_reset' %}">Esqueci a Senha</a></li>
                    {% endif %}
                </ul>
            </div>

            <div class="footer-col">
                <h4>Fale Conosco</h4>
                <ul class="footer-contact">
                    <li><i class="fas fa-envelope"></i> contato@evotiva.com.br</li>
                    <li><i class="fab fa-whatsapp"></i> (11) 99999-0000</li>
                </ul>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                </div>
            </div>

        </div>

        <div class="footer-bottom">
            <p>&copy; {% now "Y" %} <strong>Evotiva Tecnologia</strong>. Todos os direitos reservados.</p>
            <p style="font-size: 0.8rem; opacity: 0.6;">Política de Privacidade • Termos de Uso</p>
        </div>
    </div>
</footer>

    <script>
        const mobileToggle = document.getElementById('mobileToggle');
        const navMenu = document.getElementById('navMenu');

        if(mobileToggle){
            mobileToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                const icon = mobileToggle.querySelector('i');
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            });
        }
    </script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>